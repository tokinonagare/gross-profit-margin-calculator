<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gross Profit Margin Calculator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* ÈöêËóèÊï∞Â≠óËæìÂÖ•Ê°ÜÁöÑ‰∏ä‰∏ãÁÆ≠Â§¥ */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // ÁøªËØëÊï∞ÊçÆ
        const translations = {
            en: {
                "calculator": {
                    "marginCalculator": {
                        "title": "Gross Profit Margin Calculator",
                        "salesPrice": "Sales Price (Revenue)",
                        "productCost": "Product Cost (COGS)",
                        "grossProfit": "Gross Profit",
                        "profitMargin": "Profit Margin",
                        "calculate": "üí° Calculate Margin",
                        "reset": "üîÑ Reset",
                        "unit": {
                            "currency": "PHP",
                            "percent": "%"
                        }
                    },
                    "priceCalculator": {
                        "title": "Calculate Sales Price by Margin",
                        "targetMargin": "Target Profit Margin",
                        "productCost": "Product Cost (COGS)",
                        "suggestedPrice": "Suggested Sales Price",
                        "expectedProfit": "Expected Gross Profit",
                        "calculate": "üí° Calculate Price",
                        "reset": "üîÑ Reset",
                        "unit": {
                            "currency": "PHP",
                            "percent": "%"
                        }
                    }
                },
                "validation": {
                    "salesPriceRequired": "Sales price must be greater than 0",
                    "costNonNegative": "Cost must be non-negative",
                    "marginRange": "Profit margin must be between 0% and 100%",
                    "negativeProfitWarning": "Warning: Cost exceeds sales price, resulting in negative profit margin"
                },
                "concept": {
                    "title": "What is Profit Margin?",
                    "definition": "Profit margin is the percentage of gross profit relative to sales revenue, representing the difference between revenue and cost of goods sold.",
                    "purpose": "For every dollar of sales revenue, after deducting the cost of goods sold, how much money is available for period expenses and profit."
                },
                "formula": {
                    "title": "Formula",
                    "margin": "Profit Margin = {(Sales Revenue - Sales Cost) / Sales Revenue} √ó 100%"
                },
                "language": {
                    "switch": "Switch Language"
                }
            },
            "zh-CN": {
                "calculator": {
                    "marginCalculator": {
                        "title": "ÊØõÂà©ÁéáËÆ°ÁÆóÊú∫",
                        "salesPrice": "ÈîÄÂîÆ‰ª∑Ê†ºÔºàÈîÄË¥ßÊî∂ÂÖ•Ôºâ",
                        "productCost": "‰∫ßÂìÅÊàêÊú¨ÔºàÈîÄË¥ßÊàêÊú¨Ôºâ",
                        "grossProfit": "ÊØõÂà©È¢ù",
                        "profitMargin": "ÊØõÂà©Áéá",
                        "calculate": "üí° ËÆ°ÁÆóÊØõÂà©Áéá",
                        "reset": "üîÑ Ê∏ÖÈô§ÈáçÁΩÆ",
                        "unit": {
                            "currency": "PHP",
                            "percent": "%"
                        }
                    },
                    "priceCalculator": {
                        "title": "‰ª•ÊØõÂà©ÁéáËÆ°ÁÆóÈîÄÂîÆ‰ª∑Ê†º",
                        "targetMargin": "ÁõÆÊ†áÊØõÂà©Áéá",
                        "productCost": "‰∫ßÂìÅÊàêÊú¨ÔºàÈîÄË¥ßÊàêÊú¨Ôºâ",
                        "suggestedPrice": "Âª∫ËÆÆÈîÄÂîÆ‰ª∑Ê†º",
                        "expectedProfit": "È¢ÑÊúüÊØõÂà©È¢ù",
                        "calculate": "üí° ËÆ°ÁÆóÈîÄÂîÆ‰ª∑Ê†º",
                        "reset": "üîÑ Ê∏ÖÈô§ÈáçÁΩÆ",
                        "unit": {
                            "currency": "PHP",
                            "percent": "%"
                        }
                    }
                },
                "validation": {
                    "salesPriceRequired": "ÈîÄÂîÆ‰ª∑Ê†ºÂøÖÈ°ªÂ§ß‰∫é 0",
                    "costNonNegative": "ÊàêÊú¨ÂøÖÈ°ª‰∏∫ÈùûË¥üÊï∞",
                    "marginRange": "ÊØõÂà©ÁéáÂøÖÈ°ªÂú® 0% Ëá≥ 100% ‰πãÈó¥",
                    "negativeProfitWarning": "Ë≠¶ÂëäÔºöÊàêÊú¨Ë∂ÖËøáÈîÄÂîÆ‰ª∑Ê†ºÔºåÂ∞Ü‰∫ßÁîüË¥üÊØõÂà©Áéá"
                },
                "concept": {
                    "title": "‰ªÄ‰πàÊòØÊØõÂà©ÁéáÔºü",
                    "definition": "ÊØõÂà©ÁéáÊòØÊØõÂà©Âç†ÈîÄÂîÆÊî∂ÂÖ•ÁöÑÁôæÂàÜÊØîÔºåÊØõÂà©‰∏∫Êî∂ÂÖ•‰∏éÊàêÊú¨Â∑ÆÈ¢ù„ÄÇ",
                    "purpose": "ÊØè‰∏ÄÂÖÉÈîÄÂîÆÊî∂ÂÖ•Êâ£Èô§ÈîÄÂîÆÊàêÊú¨ÂêéÔºåÊúâÂ§öÂ∞ëÈí±ÂèØÁî®‰∫éÊúüÈó¥Ë¥πÁî®ÂíåÁõàÂà©„ÄÇ"
                },
                "formula": {
                    "title": "ËÆ°ÁÆóÂÖ¨Âºè",
                    "margin": "ÈîÄÂîÆÊØõÂà©Áéá = {ÔºàÈîÄÂîÆÊî∂ÂÖ• - ÈîÄÂîÆÊàêÊú¨Ôºâ/ ÈîÄÂîÆÊî∂ÂÖ•} √ó 100%"
                },
                "language": {
                    "switch": "ÂàáÊç¢ËØ≠Ë®Ä"
                }
            }
        };

        // ÂàõÂª∫ËØ≠Ë®Ä Context
        const LanguageContext = createContext();

        // ËØ≠Ë®ÄÊèê‰æõËÄÖÁªÑ‰ª∂
        function LanguageProvider({ children }) {
            const [lang, setLang] = useState(() => {
                return localStorage.getItem('language') || 'en';
            });

            const changeLanguage = (newLang) => {
                setLang(newLang);
                localStorage.setItem('language', newLang);
            };

            const t = (key) => {
                const keys = key.split('.');
                let value = translations[lang];
                for (const k of keys) {
                    value = value?.[k];
                }
                return value || key;
            };

            return (
                <LanguageContext.Provider value={{ t, i18n: { language: lang, changeLanguage } }}>
                    {children}
                </LanguageContext.Provider>
            );
        }

        // ÁøªËØë hook
        function useTranslation() {
            return useContext(LanguageContext);
        }

        // ËØ≠Ë®ÄÂàáÊç¢ÁªÑ‰ª∂
        function LanguageSwitcher() {
            const { i18n, t } = useTranslation();

            const toggleLanguage = () => {
                const isEnglish = i18n.language === 'en' || i18n.language.startsWith('en-');
                const newLang = isEnglish ? 'zh-CN' : 'en';
                i18n.changeLanguage(newLang);
            };

            const isEnglish = i18n.language === 'en' || i18n.language.startsWith('en-');

            return (
                <button
                    onClick={toggleLanguage}
                    className="px-4 py-1 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-all duration-300 backdrop-blur-sm hover:scale-105 font-medium"
                    aria-label={t('language.switch')}
                >
                    üåê {isEnglish ? '‰∏≠Êñá' : 'En'}
                </button>
            );
        }

        // ÊØõÂà©ÁéáËÆ°ÁÆóÂô®ÁªÑ‰ª∂
        function MarginCalculator() {
            const { t } = useTranslation();
            const [salesPrice, setSalesPrice] = useState('');
            const [cost, setCost] = useState('');
            const [result, setResult] = useState(null);
            const [error, setError] = useState('');

            const calculate = () => {
                setError('');
                const price = parseFloat(salesPrice);
                const productCost = parseFloat(cost);

                if (isNaN(price) || price <= 0) {
                    setError(t('validation.salesPriceRequired'));
                    return;
                }

                if (isNaN(productCost) || productCost < 0) {
                    setError(t('validation.costNonNegative'));
                    return;
                }

                if (productCost > price) {
                    setError(t('validation.negativeProfitWarning'));
                }

                const grossProfit = price - productCost;
                const profitMargin = (grossProfit / price) * 100;

                setResult({ grossProfit, profitMargin });
            };

            const reset = () => {
                setSalesPrice('');
                setCost('');
                setResult(null);
                setError('');
            };

            return (
                <div className="bg-white rounded-2xl shadow-[0_10px_25px_rgba(0,0,0,0.1)] p-8 md:p-12 transition-all duration-300 hover:shadow-[0_15px_40px_rgba(0,0,0,0.3)]">
                    <h2 className="text-2xl font-bold text-gray-800 mb-8 pb-3 border-b-2 border-[#f5576c] text-center">
                        üìä {t('calculator.marginCalculator.title')}
                    </h2>

                    <div className="space-y-5 mb-6">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                {t('calculator.marginCalculator.salesPrice')}
                            </label>
                            <div className="relative">
                                <input
                                    type="number"
                                    inputMode="decimal"
                                    value={salesPrice}
                                    onChange={(e) => setSalesPrice(e.target.value)}
                                    className="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-[#f5576c] focus:outline-none focus:ring-2 focus:ring-[#f5576c]/20 hover:border-gray-400 transition-all duration-300"
                                    placeholder="0"
                                    min="0"
                                    step="0.01"
                                />
                                <span className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm">
                                    {t('calculator.marginCalculator.unit.currency')}
                                </span>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-[#374151] mb-3">
                                {t('calculator.marginCalculator.productCost')}
                            </label>
                            <div className="relative">
                                <input
                                    type="number"
                                    inputMode="decimal"
                                    value={cost}
                                    onChange={(e) => setCost(e.target.value)}
                                    className="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-[#f5576c] focus:outline-none focus:ring-2 focus:ring-[#f5576c]/20 hover:border-gray-400 transition-all duration-300"
                                    placeholder="0"
                                    min="0"
                                    step="0.01"
                                />
                                <span className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm">
                                    {t('calculator.marginCalculator.unit.currency')}
                                </span>
                            </div>
                        </div>
                    </div>

                    {error && (
                        <div className="mb-4 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded">
                            {error}
                        </div>
                    )}

                    {result && (
                        <div className="mb-6 p-5 bg-gradient-to-r from-[#fef3c7] to-[#fde68a] rounded-xl border border-yellow-300">
                            <div className="space-y-4">
                                <div>
                                    <div className="text-sm text-gray-700 mb-1 font-medium">
                                        üíµ {t('calculator.marginCalculator.grossProfit')}
                                    </div>
                                    <div className="text-2xl md:text-3xl font-bold text-[#f5576c] break-all">
                                        {result.grossProfit.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}{' '}
                                        <span className="text-lg text-gray-600">
                                            {t('calculator.marginCalculator.unit.currency')}
                                        </span>
                                    </div>
                                </div>
                                <div>
                                    <div className="text-sm text-gray-700 mb-1 font-medium">
                                        üìà {t('calculator.marginCalculator.profitMargin')}
                                    </div>
                                    <div className="text-2xl md:text-3xl font-bold text-green-600 break-all">
                                        {result.profitMargin.toFixed(2)}{' '}
                                        <span className="text-lg text-gray-600">
                                            {t('calculator.marginCalculator.unit.percent')}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="flex gap-3">
                        <button
                            onClick={calculate}
                            className="flex-1 bg-gradient-to-r from-[#f093fb] to-[#f5576c] text-white py-3 px-6 rounded-lg font-semibold hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(245,87,108,0.4)] transition-all duration-300 shadow-md"
                        >
                            {t('calculator.marginCalculator.calculate')}
                        </button>
                        <button
                            onClick={reset}
                            className="flex-1 bg-[#f3f4f6] text-[#374151] py-3 px-6 rounded-lg font-semibold hover:bg-[#e5e7eb] transition-all duration-300"
                        >
                            {t('calculator.marginCalculator.reset')}
                        </button>
                    </div>
                </div>
            );
        }

        // ‰ª∑Ê†ºËÆ°ÁÆóÂô®ÁªÑ‰ª∂
        function PriceCalculator() {
            const { t } = useTranslation();
            const [targetMargin, setTargetMargin] = useState('');
            const [cost, setCost] = useState('');
            const [result, setResult] = useState(null);
            const [error, setError] = useState('');

            const calculate = () => {
                setError('');
                const margin = parseFloat(targetMargin);
                const productCost = parseFloat(cost);

                if (isNaN(margin) || margin < 0 || margin >= 100) {
                    setError(t('validation.marginRange'));
                    return;
                }

                if (isNaN(productCost) || productCost < 0) {
                    setError(t('validation.costNonNegative'));
                    return;
                }

                const suggestedPrice = productCost / (1 - margin / 100);
                const expectedProfit = suggestedPrice - productCost;

                setResult({ suggestedPrice, expectedProfit });
            };

            const reset = () => {
                setTargetMargin('');
                setCost('');
                setResult(null);
                setError('');
            };

            return (
                <div className="bg-white rounded-2xl shadow-[0_10px_25px_rgba(0,0,0,0.1)] p-8 md:p-12 transition-all duration-300 hover:shadow-[0_15px_40px_rgba(0,0,0,0.3)]">
                    <h2 className="text-2xl font-bold text-gray-800 mb-8 pb-3 border-b-2 border-[#f5576c] text-center">
                        üí° {t('calculator.priceCalculator.title')}
                    </h2>

                    <div className="space-y-5 mb-6">
                        <div>
                            <label className="block text-sm font-medium text-[#374151] mb-3">
                                {t('calculator.priceCalculator.targetMargin')}
                            </label>
                            <div className="relative">
                                <input
                                    type="number"
                                    inputMode="decimal"
                                    value={targetMargin}
                                    onChange={(e) => setTargetMargin(e.target.value)}
                                    className="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-[#f5576c] focus:outline-none focus:ring-2 focus:ring-[#f5576c]/20 hover:border-gray-400 transition-all duration-300"
                                    placeholder="0"
                                    min="0"
                                    max="99.99"
                                    step="0.01"
                                />
                                <span className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm">
                                    {t('calculator.priceCalculator.unit.percent')}
                                </span>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-[#374151] mb-3">
                                {t('calculator.priceCalculator.productCost')}
                            </label>
                            <div className="relative">
                                <input
                                    type="number"
                                    inputMode="decimal"
                                    value={cost}
                                    onChange={(e) => setCost(e.target.value)}
                                    className="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-[#f5576c] focus:outline-none focus:ring-2 focus:ring-[#f5576c]/20 hover:border-gray-400 transition-all duration-300"
                                    placeholder="0"
                                    min="0"
                                    step="0.01"
                                />
                                <span className="absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm">
                                    {t('calculator.priceCalculator.unit.currency')}
                                </span>
                            </div>
                        </div>
                    </div>

                    {error && (
                        <div className="mb-4 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 rounded">
                            {error}
                        </div>
                    )}

                    {result && (
                        <div className="mb-6 p-5 bg-gradient-to-r from-[#fef3c7] to-[#fde68a] rounded-xl border border-yellow-300">
                            <div className="space-y-4">
                                <div>
                                    <div className="text-sm text-gray-700 mb-1 font-medium">
                                        üíµ {t('calculator.priceCalculator.expectedProfit')}
                                    </div>
                                    <div className="text-2xl md:text-3xl font-bold text-[#f5576c] break-all">
                                        {result.expectedProfit.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}{' '}
                                        <span className="text-lg text-gray-600">
                                            {t('calculator.priceCalculator.unit.currency')}
                                        </span>
                                    </div>
                                </div>
                                <div>
                                    <div className="text-sm text-gray-700 mb-1 font-medium">
                                        üí∞ {t('calculator.priceCalculator.suggestedPrice')}
                                    </div>
                                    <div className="text-2xl md:text-3xl font-bold text-green-600 break-all">
                                        {result.suggestedPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}{' '}
                                        <span className="text-lg text-gray-600">
                                            {t('calculator.priceCalculator.unit.currency')}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="flex gap-3">
                        <button
                            onClick={calculate}
                            className="flex-1 bg-gradient-to-r from-[#f093fb] to-[#f5576c] text-white py-3 px-6 rounded-lg font-semibold hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(245,87,108,0.4)] transition-all duration-300 shadow-md"
                        >
                            {t('calculator.priceCalculator.calculate')}
                        </button>
                        <button
                            onClick={reset}
                            className="flex-1 bg-[#f3f4f6] text-[#374151] py-3 px-6 rounded-lg font-semibold hover:bg-[#e5e7eb] transition-all duration-300"
                        >
                            {t('calculator.priceCalculator.reset')}
                        </button>
                    </div>
                </div>
            );
        }

        // ‰∏ªÂ∫îÁî®ÁªÑ‰ª∂
        function App() {
            const { t } = useTranslation();

            return (
                <div className="min-h-screen bg-gradient-to-br from-[#2e2e2e] to-[#e0e0e0]">
                    <header className="flex justify-end bg-gradient-to-r py-1 px-10 from-[#ec4899] to-[#8b5cf6] shadow-md sticky top-0 z-50">
                        <LanguageSwitcher />
                    </header>

                    <main className="flex justify-center py-8 md:py-12 px-6 md:px-10">
                        <div className="w-full max-w-[800px]">
                            <div className="space-y-6 md:space-y-8">
                                <MarginCalculator />
                                <PriceCalculator />
                            </div>

                            <div className="mt-8">
                                <div className="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 className="text-xl font-bold mb-3 text-gray-800 border-b-2 border-[#f5576c] pb-2 text-center">
                                        üìö {t('concept.title')}
                                    </h3>
                                    <p className="mb-2 text-gray-700">
                                        <strong>{t('concept.definition')}</strong>
                                    </p>
                                    <p className="text-gray-600 mb-4">{t('concept.purpose')}</p>
                                    <div className="mt-4 p-4 bg-gradient-to-r from-[#dcfce7] to-[#bbf7d0] rounded-xl border border-green-300">
                                        <div className="text-sm font-semibold text-gray-800 mb-2">
                                            üìê {t('formula.title')}
                                        </div>
                                        <div className="text-sm text-gray-700 font-mono">
                                            {t('formula.margin')}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="bg-gradient-to-r from-[#ec4899] to-[#8b5cf6] mt-12">
                        <div className="max-w-[800px] mx-auto px-6 md:px-10 py-6">
                            <div className="text-center text-white text-sm">
                                ¬© 2024 Gross Profit Margin Calculator
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        // Ê∏≤ÊüìÂ∫îÁî®
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <LanguageProvider>
                <App />
            </LanguageProvider>
        );
    </script>
</body>
</html>
