# 毛利率计算器实施计划

## 项目概述
实现一个与参考网站 (https://profit.0123456789.tw/) 功能和样式完全相同的毛利率计算器，支持中英文双语，并部署到 Cloudflare Pages。

## 技术栈
- **框架**: React 18 + TypeScript
- **构建工具**: Vite
- **样式**: Tailwind CSS
- **国际化**: i18next + react-i18next
- **部署**: Cloudflare Pages
- **包管理**: npm/yarn/pnpm（待确认项目使用）

---

## 阶段 1: 项目初始化与基础配置

**目标**: 搭建项目基础架构，配置开发环境

**任务清单**:
- [ ] 使用 Vite 创建 React + TypeScript 项目
- [ ] 安装并配置 Tailwind CSS
- [ ] 配置 TypeScript 编译选项
- [ ] 设置项目目录结构
- [ ] 配置代码格式化工具（ESLint + Prettier）
- [ ] 初始化 Git 仓库

**成功标准**:
- ✅ 项目能够成功启动开发服务器
- ✅ Tailwind CSS 样式生效
- ✅ TypeScript 编译无错误
- ✅ 代码格式化工具正常工作

**状态**: 未开始

---

## 阶段 2: 国际化配置

**目标**: 实现中英文双语支持

**任务清单**:
- [ ] 安装 i18next 和 react-i18next
- [ ] 配置 i18next 初始化
- [ ] 创建中文翻译文件 (zh-TW.json)
- [ ] 创建英文翻译文件 (en.json)
- [ ] 实现语言切换组件
- [ ] 配置浏览器语言自动检测

**成功标准**:
- ✅ 可以通过 UI 切换中英文
- ✅ 所有文本内容都能正确翻译
- ✅ 首次访问时根据浏览器语言自动选择

**测试用例**:
- 切换语言后，页面所有文本正确更新
- 刷新页面后，语言选择保持不变

**状态**: 未开始

---

## 阶段 3: 核心计算功能实现

**目标**: 实现两个核心计算器功能

**任务清单**:
- [ ] 实现毛利率计算逻辑
  - 输入: 销售价格、产品成本
  - 输出: 毛利额、毛利率
  - 公式: 毛利率 = {(销售收入 - 销售成本) / 销售收入} × 100%
- [ ] 实现销售价格计算逻辑
  - 输入: 目标毛利率、产品成本
  - 输出: 建议销售价格、预期毛利额
  - 公式: 销售价格 = 成本 ÷ (1 - 毛利率÷100)
- [ ] 实现输入验证逻辑
  - 验证销售价格 > 0
  - 验证成本 ≥ 0
  - 验证毛利率在 0% 至 100% 之间
  - 成本超过销售价格时的警示
- [ ] 编写单元测试

**成功标准**:
- ✅ 计算结果与参考网站完全一致
- ✅ 所有边界情况都有正确的验证和错误提示
- ✅ 所有单元测试通过

**测试用例**:
1. 毛利率计算:
   - 输入: 销售价格 100, 成本 60 → 输出: 毛利额 40, 毛利率 40%
   - 输入: 销售价格 100, 成本 100 → 输出: 毛利额 0, 毛利率 0%
   - 输入: 销售价格 100, 成本 120 → 输出: 负毛利率警示
2. 销售价格计算:
   - 输入: 毛利率 40%, 成本 60 → 输出: 销售价格 100, 毛利额 40
   - 输入: 毛利率 0%, 成本 100 → 输出: 销售价格 100, 毛利额 0
   - 输入: 毛利率 50%, 成本 50 → 输出: 销售价格 100, 毛利额 50

**状态**: 未开始

---

## 阶段 4: UI 组件开发与样式实现

**目标**: 完全复刻参考网站的视觉效果和交互

**任务清单**:
- [ ] 实现页面布局结构（Header、Footer、导航等）
- [ ] 实现计算器卡片组件
- [ ] 实现输入字段组件
- [ ] 实现结果显示组件
- [ ] 实现按钮组件（计算、清除重置）
- [ ] 使用 Tailwind 实现渐变背景（粉红到紫色）
- [ ] 实现响应式设计（移动端适配，640px 断点）
- [ ] 实现过渡动画效果
- [ ] 实现语言切换 UI

**成功标准**:
- ✅ 视觉效果与参考网站高度一致
- ✅ 在桌面端和移动端都能正常显示
- ✅ 所有交互效果流畅自然
- ✅ 通过 Lighthouse 性能测试（≥90分）

**测试用例**:
- 在不同屏幕尺寸下布局正确
- 点击按钮有视觉反馈
- 输入无效数据时有明确提示

**状态**: 未开始

---

## 阶段 5: 部署与优化

**目标**: 部署到 Cloudflare Pages 并优化性能

**任务清单**:
- [ ] 配置生产环境构建
- [ ] 创建 Cloudflare Pages 项目
- [ ] 配置自动部署（Git 集成）
- [ ] 设置自定义域名（如需要）
- [ ] 配置 SEO meta 标签
- [ ] 添加 Google Analytics（可选）
- [ ] 性能优化
  - 代码分割
  - 资源压缩
  - 图片优化
- [ ] 最终测试

**成功标准**:
- ✅ 网站成功部署到 Cloudflare Pages
- ✅ 所有功能在生产环境正常工作
- ✅ 页面加载速度 < 2 秒
- ✅ SEO 基础配置完成

**测试用例**:
- 访问生产环境 URL 正常显示
- 中英文切换功能正常
- 所有计算功能正确
- 移动端和桌面端都能正常使用

**状态**: 未开始

---

## 风险与注意事项

1. **样式还原度**: 需要仔细对比参考网站，确保渐变色、间距、字体大小等细节一致
2. **数值精度**: 计算结果需要与参考网站完全一致，注意四舍五入规则
3. **响应式设计**: 确保在各种设备上都有良好的显示效果
4. **国际化**: 确保所有文本都已翻译，没有硬编码的中文
5. **Cloudflare Pages 限制**: 了解 Cloudflare Pages 的构建限制和配置要求

## 完成定义检查清单

每个阶段完成后需确认：
- [ ] 测试已编写并通过
- [ ] 代码遵循项目约定
- [ ] 没有格式化/代码检查警告
- [ ] 没有 import 未使用的模块
- [ ] 提交信息清晰明确
- [ ] 实现符合计划
- [ ] 代码里不能有没带 issue 编号的 TODO
